"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[465,846],{2846:(t,e,s)=>{e.wT=void 0;let i=s(4582),a=s(6268),h=s(6103);var r=i.isS,l=i.isChar,o=i.isNameStartChar,n=i.isNameChar,c=i.S_LIST,d=i.NAME_RE,u=a.isChar,m=h.isNCNameStartChar,p=h.isNCNameChar,f=h.NC_NAME_RE;let g="http://www.w3.org/XML/1998/namespace",x="http://www.w3.org/2000/xmlns/",b={__proto__:null,xml:g,xmlns:x},C={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},T=t=>34===t||39===t,k=[34,39],v=[...k,91,62],w=[...k,60,93],D=[61,63,...c],S=[...c,62,38,60];function N(t,e,s){switch(e){case"xml":s!==g&&t.fail(`xml prefix must be bound to ${g}.`);break;case"xmlns":s!==x&&t.fail(`xmlns prefix must be bound to ${x}.`)}switch(s){case x:t.fail(""===e?`the default namespace may not be set to ${s}.`:`may not assign a prefix (even "xmlns") to the URI \
${x}.`);break;case g:switch(e){case"xml":break;case"":t.fail(`the default namespace may not be set to ${s}.`);break;default:t.fail("may not assign the xml namespace to another prefix.")}}}let P=t=>f.test(t),A=t=>d.test(t),y={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};class E{constructor(t){this.opt=null!=t?t:{},this.fragmentOpt=!!this.opt.fragment;let e=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=!1!==this.opt.position,this.fileName=this.opt.fileName,e){this.nameStartCheck=m,this.nameCheck=p,this.isName=P,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},b);let t=this.opt.additionalNamespaces;null!=t&&(!function(t,e){for(let s of Object.keys(e))N(t,s,e[s])}(this,t),Object.assign(this.ns,t))}else this.nameStartCheck=o,this.nameCheck=n,this.isName=A,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}get closed(){return this._closed}_init(){var t;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=0,this.attribList=[];let{fragmentOpt:e}=this;this.state=13*!!e,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=e,this.xmlDeclPossible=!e,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:s}=this.opt;if(void 0===s){if(!0===this.opt.forceXMLVersion)throw Error("forceXMLVersion set but defaultXMLVersion is not set");s="1.0"}this.setXMLVersion(s),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(C),null==(t=this.readyHandler)||t.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(t,e){this[y[t]]=e}off(t){this[y[t]]=void 0}makeError(t){var e;let s=null!=(e=this.fileName)?e:"";return this.trackPosition&&(s.length>0&&(s+=":"),s+=`${this.line}:${this.column}`),s.length>0&&(s+=": "),Error(s+t)}fail(t){let e=this.makeError(t),s=this.errorHandler;if(void 0===s)throw e;return s(e),this}write(t){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let e=!1;null===t?(e=!0,t=""):"object"==typeof t&&(t=t.toString()),void 0!==this.carriedFromPrevious&&(t=`${this.carriedFromPrevious}${t}`,this.carriedFromPrevious=void 0);let s=t.length,i=t.charCodeAt(s-1);!e&&(13===i||i>=55296&&i<=56319)&&(this.carriedFromPrevious=t[s-1],s--,t=t.slice(0,s));let{stateTable:a}=this;for(this.chunk=t,this.i=0;this.i<s;)a[this.state].call(this);return this.chunkPosition+=s,e?this.end():this}close(){return this.write(null)}getCode10(){let{chunk:t,i:e}=this;if(this.prevI=e,this.i=e+1,e>=t.length)return -1;let s=t.charCodeAt(e);if(this.column++,s<55296){if(s>=32||9===s)return s;switch(s){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:return 10===t.charCodeAt(e+1)&&(this.i=e+2),this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),s}}if(s>56319)return s>=57344&&s<=65533||this.fail("disallowed character."),s;let i=65536+(s-55296)*1024+(t.charCodeAt(e+1)-56320);return this.i=e+2,i>1114111&&this.fail("disallowed character."),i}getCode11(){let{chunk:t,i:e}=this;if(this.prevI=e,this.i=e+1,e>=t.length)return -1;let s=t.charCodeAt(e);if(this.column++,s<55296){if(s>31&&s<127||s>159&&8232!==s||9===s)return s;switch(s){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:{let s=t.charCodeAt(e+1);(10===s||133===s)&&(this.i=e+2)}case 133:case 8232:return this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),s}}if(s>56319)return s>=57344&&s<=65533||this.fail("disallowed character."),s;let i=65536+(s-55296)*1024+(t.charCodeAt(e+1)-56320);return this.i=e+2,i>1114111&&this.fail("disallowed character."),i}getCodeNorm(){let t=this.getCode();return -2===t?10:t}unget(){this.i=this.prevI,this.column--}captureTo(t){let{i:e}=this,{chunk:s}=this;for(;;){let i=this.getCode(),a=-2===i,h=a?10:i;if(-1===h||t.includes(h))return this.text+=s.slice(e,this.prevI),h;a&&(this.text+=`${s.slice(e,this.prevI)}
`,e=this.i)}}captureToChar(t){let{i:e}=this,{chunk:s}=this;for(;;){let i=this.getCode();switch(i){case -2:this.text+=`${s.slice(e,this.prevI)}
`,e=this.i,i=10;break;case -1:return this.text+=s.slice(e),!1}if(i===t)return this.text+=s.slice(e,this.prevI),!0}}captureNameChars(){let{chunk:t,i:e}=this;for(;;){let s=this.getCode();if(-1===s)return this.name+=t.slice(e),-1;if(!n(s))return this.name+=t.slice(e,this.prevI),-2===s?10:s}}skipSpaces(){for(;;){let t=this.getCodeNorm();if(-1===t||!r(t))return t}}setXMLVersion(t){this.currentXMLVersion=t,"1.0"===t?(this.isChar=l,this.getCode=this.getCode10):(this.isChar=u,this.getCode=this.getCode11)}sBegin(){65279===this.chunk.charCodeAt(0)&&(this.i++,this.column++),this.state=1}sBeginWhitespace(){let t=this.i,e=this.skipSpaces();switch(this.prevI!==t&&(this.xmlDeclPossible=!1),e){case 60:if(this.state=15,0!==this.text.length)throw Error("no-empty text at start");break;case -1:break;default:this.unget(),this.state=13,this.xmlDeclPossible=!1}}sDoctype(){var t;let e=this.captureTo(v);switch(e){case 62:null==(t=this.doctypeHandler)||t.call(this,this.text),this.text="",this.state=13,this.doctype=!0;break;case -1:break;default:this.text+=String.fromCodePoint(e),91===e?this.state=4:T(e)&&(this.state=3,this.q=e)}}sDoctypeQuote(){let t=this.q;this.captureToChar(t)&&(this.text+=String.fromCodePoint(t),this.q=null,this.state=2)}sDTD(){let t=this.captureTo(w);-1!==t&&(this.text+=String.fromCodePoint(t),93===t?this.state=2:60===t?this.state=6:T(t)&&(this.state=5,this.q=t))}sDTDQuoted(){let t=this.q;this.captureToChar(t)&&(this.text+=String.fromCodePoint(t),this.state=4,this.q=null)}sDTDOpenWaka(){let t=this.getCodeNorm();switch(this.text+=String.fromCodePoint(t),t){case 33:this.state=7,this.openWakaBang="";break;case 63:this.state=11;break;default:this.state=4}}sDTDOpenWakaBang(){let t=String.fromCodePoint(this.getCodeNorm()),e=this.openWakaBang+=t;this.text+=t,"-"!==e&&(this.state="--"===e?8:4,this.openWakaBang="")}sDTDComment(){this.captureToChar(45)&&(this.text+="-",this.state=9)}sDTDCommentEnding(){let t=this.getCodeNorm();this.text+=String.fromCodePoint(t),this.state=45===t?10:8}sDTDCommentEnded(){let t=this.getCodeNorm();this.text+=String.fromCodePoint(t),62===t?this.state=4:(this.fail("malformed comment."),this.state=8)}sDTDPI(){this.captureToChar(63)&&(this.text+="?",this.state=12)}sDTDPIEnding(){let t=this.getCodeNorm();this.text+=String.fromCodePoint(t),62===t&&(this.state=4)}sText(){0!==this.tags.length?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:t}=this,{chunk:e}=this;t:for(;;)switch(this.getCode()){case -2:this.entity+=`${e.slice(t,this.prevI)}
`,t=this.i;break;case 59:{let s,{entityReturnState:i}=this,a=this.entity+e.slice(t,this.prevI);this.state=i,""===a?(this.fail("empty entity name."),s="&;"):(s=this.parseEntity(a),this.entity=""),(13!==i||void 0!==this.textHandler)&&(this.text+=s);break t}case -1:this.entity+=e.slice(t);break t}}sOpenWaka(){let t=this.getCode();if(o(t))this.state=34,this.unget(),this.xmlDeclPossible=!1;else switch(t){case 47:this.state=43,this.xmlDeclPossible=!1;break;case 33:this.state=16,this.openWakaBang="",this.xmlDeclPossible=!1;break;case 63:this.state=23;break;default:this.fail("disallowed character in tag name"),this.state=13,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=20,this.openWakaBang="";break;case"--":this.state=17,this.openWakaBang="";break;case"DOCTYPE":this.state=2,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(45)&&(this.state=18)}sCommentEnding(){var t;let e=this.getCodeNorm();45===e?(this.state=19,null==(t=this.commentHandler)||t.call(this,this.text),this.text=""):(this.text+=`-${String.fromCodePoint(e)}`,this.state=17)}sCommentEnded(){let t=this.getCodeNorm();62!==t?(this.fail("malformed comment."),this.text+=`--${String.fromCodePoint(t)}`,this.state=17):this.state=13}sCData(){this.captureToChar(93)&&(this.state=21)}sCDataEnding(){let t=this.getCodeNorm();93===t?this.state=22:(this.text+=`]${String.fromCodePoint(t)}`,this.state=20)}sCDataEnding2(){var t;let e=this.getCodeNorm();switch(e){case 62:null==(t=this.cdataHandler)||t.call(this,this.text),this.text="",this.state=13;break;case 93:this.text+="]";break;default:this.text+=`]]${String.fromCodePoint(e)}`,this.state=20}}sPIFirstChar(){let t=this.getCodeNorm();this.nameStartCheck(t)?(this.piTarget+=String.fromCodePoint(t),this.state=24):63===t||r(t)?(this.fail("processing instruction without a target."),this.state=63===t?26:25):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(t),this.state=24)}sPIRest(){let{chunk:t,i:e}=this;for(;;){let s=this.getCodeNorm();if(-1===s){this.piTarget+=t.slice(e);return}if(!this.nameCheck(s)){this.piTarget+=t.slice(e,this.prevI);let i=63===s;i||r(s)?"xml"===this.piTarget?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=i?33:27):this.state=i?26:25:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(s));break}}}sPIBody(){if(0===this.text.length){let t=this.getCodeNorm();63===t?this.state=26:r(t)||(this.text=String.fromCodePoint(t))}else this.captureToChar(63)&&(this.state=26)}sPIEnding(){var t;let e=this.getCodeNorm();if(62===e){let{piTarget:e}=this;"xml"===e.toLowerCase()&&this.fail("the XML declaration must appear at the start of the document."),null==(t=this.piHandler)||t.call(this,{target:e,body:this.text}),this.piTarget=this.text="",this.state=13}else 63===e?this.text+="?":(this.text+=`?${String.fromCodePoint(e)}`,this.state=25);this.xmlDeclPossible=!1}sXMLDeclNameStart(){let t=this.skipSpaces();if(63===t){this.state=33;return}-1!==t&&(this.state=28,this.name=String.fromCodePoint(t))}sXMLDeclName(){let t=this.captureTo(D);if(63===t){this.state=33,this.name+=this.text,this.text="",this.fail("XML declaration is incomplete.");return}if(r(t)||61===t){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail(`expected one of ${this.xmlDeclExpects.join(", ")}`)}this.state=61===t?30:29}}sXMLDeclEq(){let t=this.getCodeNorm();if(63===t){this.state=33,this.fail("XML declaration is incomplete.");return}r(t)||(61!==t&&this.fail("value required."),this.state=30)}sXMLDeclValueStart(){let t=this.getCodeNorm();if(63===t){this.state=33,this.fail("XML declaration is incomplete.");return}r(t)||(T(t)?this.q=t:(this.fail("value must be quoted."),this.q=32),this.state=31)}sXMLDeclValue(){let t=this.captureTo([this.q,63]);if(63===t){this.state=33,this.text="",this.fail("XML declaration is incomplete.");return}if(-1===t)return;let e=this.text;switch(this.text="",this.name){case"version":this.xmlDeclExpects=["encoding","standalone"],this.xmlDecl.version=e,/^1\.[0-9]+$/.test(e)?this.opt.forceXMLVersion||this.setXMLVersion(e):this.fail("version number must match /^1\\.[0-9]+$/.");break;case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(e)||this.fail("encoding value must match /^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=e;break;case"standalone":"yes"!==e&&"no"!==e&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=e}this.name="",this.state=32}sXMLDeclSeparator(){let t=this.getCodeNorm();if(63===t){this.state=33;return}r(t)||(this.fail("whitespace required."),this.unget()),this.state=27}sXMLDeclEnding(){var t;62===this.getCodeNorm()?("xml"!==this.piTarget?this.fail("processing instructions are not allowed before root."):"version"!==this.name&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),null==(t=this.xmldeclHandler)||t.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=13):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var t;let e=this.captureNameChars();if(-1===e)return;let s=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=s.ns=Object.create(null)),null==(t=this.openTagStartHandler)||t.call(this,s),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),e){case 62:this.openTag();break;case 47:this.state=35;break;default:r(e)||this.fail("disallowed character in tag name."),this.state=36}}sOpenTagSlash(){62===this.getCode()?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=36)}sAttrib(){let t=this.skipSpaces();-1!==t&&(o(t)?(this.unget(),this.state=37):62===t?this.openTag():47===t?this.state=35:this.fail("disallowed character in attribute name."))}sAttribName(){let t=this.captureNameChars();61===t?this.state=39:r(t)?this.state=38:62===t?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):-1!==t&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){let t=this.skipSpaces();switch(t){case -1:return;case 61:this.state=39;break;default:this.fail("attribute without value."),this.text="",this.name="",62===t?this.openTag():o(t)?(this.unget(),this.state=37):(this.fail("disallowed character in attribute name."),this.state=36)}}sAttribValue(){let t=this.getCodeNorm();T(t)?(this.q=t,this.state=40):r(t)||(this.fail("unquoted attribute value."),this.state=42,this.unget())}sAttribValueQuoted(){let{q:t,chunk:e}=this,{i:s}=this;for(;;)switch(this.getCode()){case t:this.pushAttrib(this.name,this.text+e.slice(s,this.prevI)),this.name=this.text="",this.q=null,this.state=41;return;case 38:this.text+=e.slice(s,this.prevI),this.state=14,this.entityReturnState=40;return;case 10:case -2:case 9:this.text+=`${e.slice(s,this.prevI)} `,s=this.i;break;case 60:this.text+=e.slice(s,this.prevI),this.fail("disallowed character.");return;case -1:this.text+=e.slice(s);return}}sAttribValueClosed(){let t=this.getCodeNorm();r(t)?this.state=36:62===t?this.openTag():47===t?this.state=35:o(t)?(this.fail("no whitespace between attributes."),this.unget(),this.state=37):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){let t=this.captureTo(S);switch(t){case 38:this.state=14,this.entityReturnState=42;break;case 60:this.fail("disallowed character.");break;case -1:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",62===t?this.openTag():this.state=36}}sCloseTag(){let t=this.captureNameChars();62===t?this.closeTag():r(t)?this.state=44:-1!==t&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case 62:this.closeTag();break;case -1:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:t,forbiddenState:e}=this,{chunk:s,textHandler:i}=this;e:for(;;)switch(this.getCode()){case 60:if(this.state=15,void 0!==i){let{text:e}=this,a=s.slice(t,this.prevI);0!==e.length?(i(e+a),this.text=""):0!==a.length&&i(a)}e=0;break e;case 38:this.state=14,this.entityReturnState=13,void 0!==i&&(this.text+=s.slice(t,this.prevI)),e=0;break e;case 93:switch(e){case 0:e=1;break;case 1:e=2;break;case 2:break;default:throw Error("impossible state")}break;case 62:2===e&&this.fail('the string "]]>" is disallowed in char data.'),e=0;break;case -2:void 0!==i&&(this.text+=`${s.slice(t,this.prevI)}
`),t=this.i,e=0;break;case -1:void 0!==i&&(this.text+=s.slice(t));break e;default:e=0}this.forbiddenState=e}handleTextOutsideRoot(){let{i:t}=this,{chunk:e,textHandler:s}=this,i=!1;s:for(;;){let a=this.getCode();switch(a){case 60:if(this.state=15,void 0!==s){let{text:i}=this,a=e.slice(t,this.prevI);0!==i.length?(s(i+a),this.text=""):0!==a.length&&s(a)}break s;case 38:this.state=14,this.entityReturnState=13,void 0!==s&&(this.text+=e.slice(t,this.prevI)),i=!0;break s;case -2:void 0!==s&&(this.text+=`${e.slice(t,this.prevI)}
`),t=this.i;break;case -1:void 0!==s&&(this.text+=e.slice(t));break s;default:r(a)||(i=!0)}}i&&(this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(t,e){var s;let{prefix:i,local:a}=this.qname(t),h={name:t,prefix:i,local:a,value:e};if(this.attribList.push(h),null==(s=this.attributeHandler)||s.call(this,h),"xmlns"===i){let t=e.trim();"1.0"===this.currentXMLVersion&&""===t&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[a]=t,N(this,a,t)}else if("xmlns"===t){let t=e.trim();this.topNS[""]=t,N(this,"",t)}}pushAttribPlain(t,e){var s;let i={name:t,value:e};this.attribList.push(i),null==(s=this.attributeHandler)||s.call(this,i)}end(){var t,e;this.sawRoot||this.fail("document must contain a root element.");let{tags:s}=this;for(;s.length>0;){let t=s.pop();this.fail(`unclosed tag: ${t.name}`)}0!==this.state&&13!==this.state&&this.fail("unexpected end.");let{text:i}=this;return 0!==i.length&&(null==(t=this.textHandler)||t.call(this,i),this.text=""),this._closed=!0,null==(e=this.endHandler)||e.call(this),this._init(),this}resolve(t){var e,s;let i=this.topNS[t];if(void 0!==i)return i;let{tags:a}=this;for(let e=a.length-1;e>=0;e--)if(void 0!==(i=a[e].ns[t]))return i;return void 0!==(i=this.ns[t])?i:null==(s=(e=this.opt).resolvePrefix)?void 0:s.call(e,t)}qname(t){let e=t.indexOf(":");if(-1===e)return{prefix:"",local:t};let s=t.slice(e+1),i=t.slice(0,e);return(""===i||""===s||s.includes(":"))&&this.fail(`malformed name: ${t}.`),{prefix:i,local:s}}processAttribsNS(){var t;let{attribList:e}=this,s=this.tag;{let{prefix:e,local:i}=this.qname(s.name);s.prefix=e,s.local=i;let a=s.uri=null!=(t=this.resolve(e))?t:"";""!==e&&("xmlns"===e&&this.fail('tags may not have "xmlns" as prefix.'),""===a&&(this.fail(`unbound namespace prefix: ${JSON.stringify(e)}.`),s.uri=e))}if(0===e.length)return;let{attributes:i}=s,a=new Set;for(let t of e){let e,s,{name:h,prefix:r,local:l}=t;""===r?(e="xmlns"===h?x:"",s=h):(void 0===(e=this.resolve(r))&&(this.fail(`unbound namespace prefix: ${JSON.stringify(r)}.`),e=r),s=`{${e}}${l}`),a.has(s)&&this.fail(`duplicate attribute: ${s}.`),a.add(s),t.uri=e,i[h]=t}this.attribList=[]}processAttribsPlain(){let{attribList:t}=this,e=this.tag.attributes;for(let{name:s,value:i}of t)void 0!==e[s]&&this.fail(`duplicate attribute: ${s}.`),e[s]=i;this.attribList=[]}openTag(){var t;this.processAttribs();let{tags:e}=this,s=this.tag;s.isSelfClosing=!1,null==(t=this.openTagHandler)||t.call(this,s),e.push(s),this.state=13,this.name=""}openSelfClosingTag(){var t,e,s;this.processAttribs();let{tags:i}=this,a=this.tag;a.isSelfClosing=!0,null==(t=this.openTagHandler)||t.call(this,a),null==(e=this.closeTagHandler)||e.call(this,a),null===(this.tag=null!=(s=i[i.length-1])?s:null)&&(this.closedRoot=!0),this.state=13,this.name=""}closeTag(){let{tags:t,name:e}=this;if(this.state=13,this.name="",""===e){this.fail("weird empty close tag."),this.text+="</>";return}let s=this.closeTagHandler,i=t.length;for(;i-- >0;){let i=this.tag=t.pop();if(this.topNS=i.ns,null==s||s(i),i.name===e)break;this.fail("unexpected close tag.")}0===i?this.closedRoot=!0:i<0&&(this.fail(`unmatched closing tag: ${e}.`),this.text+=`</${e}>`)}parseEntity(t){if("#"!==t[0]){let e=this.ENTITIES[t];return void 0!==e?e:(this.fail(this.isName(t)?"undefined entity.":"disallowed character in entity name."),`&${t};`)}let e=NaN;return("x"===t[1]&&/^#x[0-9a-f]+$/i.test(t)?e=parseInt(t.slice(2),16):/^#[0-9]+$/.test(t)&&(e=parseInt(t.slice(1),10)),this.isChar(e))?String.fromCodePoint(e):(this.fail("malformed character entity."),`&${t};`)}}e.wT=E}}]);