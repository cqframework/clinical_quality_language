(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[89],{960:(e,t,i)=>{var n=i(2055);e.exports=Number.isInteger||function(e){return"number"==typeof e&&n(e)&&Math.floor(e)===e}},1407:(e,t)=>{"use strict";t.YH=function(e){let t=e&&e.config;if(t)if(!t.length||!e.data)return e.data;else{let s=i(t);return e.data.map(n.bind(null,s))}return e};Array.prototype.push;function i(e){return e.map(e=>Array.isArray(e)?e:[e])}function n(e,t){let i={};return e.forEach((e,n)=>{let s=i;for(let t=0;t<e.length-1;t++)s=s[e[t]]=s[e[t]]||{};s[e[e.length-1]]=t[n]}),i}},2055:e=>{"use strict";e.exports=Number.isFinite||function(e){return"number"==typeof e&&e==e&&e!==1/0&&e!==-1/0}},2330:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PrefixTables=t.PrefixTablesFactory=void 0;class i{constructor(){this.byCode_={},this.byValue_={}}prefixCount(){return Object.keys(this.byCode_).length}allPrefixesByValue(){let e="",t=Object.keys(this.byValue_),i=t.length;for(let n=0;n<i;n++){let i=this.getPrefixByValue(t[n]);e+=i.code_+","+i.name_+",,"+i.value_+"\r\n"}return e}allPrefixesByCode(){let e=[],t=Object.keys(this.byCode_);t.sort();let i=t.length;for(let n=0;n<i;n++)e.push(this.getPrefixByCode(t[n]));return e}add(e){this.byCode_[e.getCode()]=e,this.byValue_[e.getValue()]=e}isDefined(e){return null!==this.byCode_[e]&&void 0!==this.byCode_[e]}getPrefixByCode(e){return this.byCode_[e]}getPrefixByValue(e){return this.byValue_[e]}}t.PrefixTablesFactory=i;var n=new i;t.PrefixTables={getInstance:function(){return n}}},4537:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNumericString=function(e){let t=""+e;return!isNaN(t)&&!isNaN(parseFloat(t))},t.isIntegerUnit=function(e){return/^\d+$/.test(e)},t.getSynonyms=function(e){let t={},i=n.getInstance(),s={};if((s=i.getUnitBySynonym(e)).units){t.status="succeeded";let e=s.units.length;t.units=[];for(let i=0;i<e;i++){let e=s.units[i];t.units[i]={code:e.csCode_,name:e.name_,guidance:e.guidance_}}}else t.status=s.status,t.msg=s.msg;return t};var n=i(9004).UnitTables},4582:(e,t)=>{"use strict";function i(e){return e>=65&&e<=90||e>=97&&e<=122||58===e||95===e||8204===e||8205===e||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=767||e>=880&&e<=893||e>=895&&e<=8191||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}Object.defineProperty(t,"__esModule",{value:!0}),t.CHAR="	\n\r -퟿-�\uD800\uDC00-\uDBFF\uDFFF",t.S=" 	\r\n",t.NAME_START_CHAR=":A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-˿Ͱ-ͽͿ-῿‌‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�\uD800\uDC00-\uDB7F\uDFFF",t.NAME_CHAR="-"+t.NAME_START_CHAR+".0-9\xb7̀-ͯ‿-⁀",t.CHAR_RE=RegExp("^["+t.CHAR+"]$","u"),t.S_RE=RegExp("^["+t.S+"]+$","u"),t.NAME_START_CHAR_RE=RegExp("^["+t.NAME_START_CHAR+"]$","u"),t.NAME_CHAR_RE=RegExp("^["+t.NAME_CHAR+"]$","u"),t.NAME_RE=RegExp("^["+t.NAME_START_CHAR+"]["+t.NAME_CHAR+"]*$","u"),t.NMTOKEN_RE=RegExp("^["+t.NAME_CHAR+"]+$","u"),t.S_LIST=[32,10,13,9],t.isChar=function(e){return e>=32&&e<=55295||10===e||13===e||9===e||e>=57344&&e<=65533||e>=65536&&e<=1114111},t.isS=function(e){return 32===e||10===e||13===e||9===e},t.isNameStartChar=i,t.isNameChar=function(e){return i(e)||e>=48&&e<=57||45===e||46===e||183===e||e>=768&&e<=879||e>=8255&&e<=8256}},4719:(e,t,i)=>{"use strict";t.l=void 0;var n=i(5047),s=r(i(4537));function r(e,t){if("function"==typeof WeakMap)var i=new WeakMap,n=new WeakMap;return(r=function(e,t){if(!t&&e&&e.__esModule)return e;var s,r,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(s=t?n:i){if(s.has(e))return s.get(e);s.set(e,o)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((r=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(r.get||r.set)?s(o,t,r):o[t]=e[t]);return o})(e,t)}var o=i(5449).Ucum,a=i(9004).UnitTables,l=i(6488).o;class u{constructor(){0===a.getInstance().unitsCount()&&n.ucumJsonDefs.loadJsonDefs(),this.uStrParser_=l.getInstance(),this.massDimIndex_=a.getInstance().getMassDimensionIndex()}useHTMLInMessages(e){void 0===e&&(e=!0),this.uStrParser_.useHTMLInMessages(e)}useBraceMsgForEachString(e){void 0===e&&(e=!0),this.uStrParser_.useBraceMsgForEachString(e)}validateUnitString(e,t,i){void 0===t&&(t=!1),void 0===i&&(i="validate");let n=this.getSpecifiedUnit(e,i,t),s=n.unit,r=s?{ucumCode:n.origString,unit:{code:s.csCode_,name:s.name_,guidance:s.guidance_}}:{ucumCode:null};return r.status=n.status,n.suggestions&&(r.suggestions=n.suggestions),r.msg=n.retMsg,r}detectConversionType(e,t){return e.moleExp_==t.moleExp_&&e.equivalentExp_==t.equivalentExp_?"normal":e.equivalentExp_==t.equivalentExp_?"mol|mass":e.moleExp_==t.moleExp_?"eq|mass":e.dim_.getElementAt(this.massDimIndex_)==t.dim_.getElementAt(this.massDimIndex_)?"eq|mol":"eq|mol|mass"}convertUnitTo(e,t,i,n={}){let{suggest:s=!1,molecularWeight:r=null,charge:a=null}=n,l={status:"failed",toVal:null,msg:[]};if(e&&(e=e.trim()),e&&""!=e||(l.status="error",l.msg.push('No "from" unit expression specified.')),this._checkFromVal(t,l),i&&(i=i.trim()),i&&""!=i||(l.status="error",l.msg.push('No "to" unit expression specified.')),"error"!==l.status){let n=null,u=this.getSpecifiedUnit(e,"convert",s);n=u.unit,u.retMsg&&(l.msg=l.msg.concat(u.retMsg)),u.suggestions&&(l.suggestions={},l.suggestions.from=u.suggestions),n||l.msg.push(`Unable to find a unit for ${e}, so no conversion could be performed.`);let _=null;if(_=(u=this.getSpecifiedUnit(i,"convert",s)).unit,u.retMsg&&(l.msg=l.msg.concat(u.retMsg)),u.suggestions&&(l.suggestions||(l.suggestions={}),l.suggestions.to=u.suggestions),_||l.msg.push(`Unable to find a unit for ${i}, so no conversion could be performed.`),n&&_){let s=this.detectConversionType(n,_),u=l.msg.length;switch(s){case"normal":try{l.toVal=_.convertFrom(t,n)}catch(e){l.msg.push(e.message)}break;case"mol|mass":if(!n.isMolMassCommensurable(_)){l.msg.push(`Sorry.  ${e} cannot be converted to ${i}.`);break}if(!r){l.msg.push(o.needMoleWeightMsg_);break}l.toVal=n.convertMolMass(t,_,r);break;case"eq|mass":if(!n.isEqMassCommensurable(_)){l.msg.push(`Sorry.  ${e} cannot be converted to ${i}.`);break}r||l.msg.push(o.needEqWeightMsg_),a||l.msg.push(o.needEqChargeMsg_),l.msg.length||(l.toVal=n.convertEqMass(t,_,r,a));break;case"eq|mol":if(!n.isEqMolCommensurable(_)){l.msg.push(`Sorry.  ${e} cannot be converted to ${i}.`);break}if(!a){l.msg.push(o.needEqChargeMsg_);break}l.toVal=n.convertEqMol(t,_,a);break;case"eq|mol|mass":if(!n.isEqMolMassCommensurable(_)){l.msg.push(`Sorry.  ${e} cannot be converted to ${i}.`);break}r||l.msg.push(o.needEqWeightMsg_),a||l.msg.push(o.needEqChargeMsg_),l.msg.length||(l.toVal=n.convertEqMolMass(t,_,r,a));break;default:l.msg.push("Unknown conversion type.  No conversion was attempted.")}l.msg.length>u?l.status="failed":(l.status="succeeded",l.fromUnit=n,l.toUnit=_)}}return l}convertToBaseUnits(e,t){let i={};if(this._checkFromVal(t,i),!i.status){let n=this.getSpecifiedUnit(e,"validate");i={status:"valid"==n.status?"succeeded":n.status};let s=n.unit;if(i.msg=n.retMsg||[],s){if(s.isArbitrary_)i.msg.push("Arbitrary units cannot be converted to base units or other units."),i.status="failed";else if("succeeded"==i.status){let e={},n=s.dim_?.dimVec_,r="1";if(n){let t=a.getInstance().dimVecIndexToBaseUnit_;for(let i=0,s=n.length;i<s;++i){let s=n[i];s&&(e[t[i]]=s,r+="."+t[i]+s)}}let o=this.getSpecifiedUnit(r,"validate"),l=o.unit;if("valid"!==o.status)i.msg.push("Unable construct base unit string; tried "+r),i.status="error";else{try{i.magnitude=l.convertFrom(t,s)}catch(e){i.msg.push(e.toString()),i.status="error"}"succeeded"==i.status&&(i.unitToExp=e,i.fromUnitIsSpecial=s.isSpecial_)}}}else n.retMsg?.length==0&&i.msg.push("Could not find unit information for "+e)}return i}_checkFromVal(e,t){(null===e||isNaN(e)||"number"!=typeof e&&!s.isNumericString(e))&&(t.status="error",t.msg||(t.msg=[]),t.msg.push('No "from" value, or an invalid "from" value, was specified.'))}checkSynonyms(e){let t={};return null==e?(t.status="error",t.msg="No term specified for synonym search."):t=s.getSynonyms(e),t}getSpecifiedUnit(e,t,i){void 0===i&&(i=!1);let n={};if(n.retMsg=[],e){let s=a.getInstance();e=e.trim();let r=s.getUnitByCode(e);if(r)n.unit=r,n.origString=e;else try{let s=this.uStrParser_.parseString(e,t,i);n.unit=s[0],n.origString=s[1],s[2]&&(n.retMsg=s[2]),n.suggestions=s[3]}catch(t){console.log(`Unit requested for unit string ${e}.request unsuccessful; error thrown = `+t.message),n.retMsg.unshift(`${e} is not a valid unit.  ${t.message}`)}}else n.retMsg.push("No unit string specified.");return n.unit?n.status=n.origString===e?"valid":"invalid":n.status=n.origString?"invalid":"error",n}commensurablesList(e,t=null){let i=[],n=null,s=this.getSpecifiedUnit(e,"validate",!1),r=s.unit;if(s.retMsg.length>0&&(i=s.retMsg),r){let s=null,o=r.getProperty("dim_");if(o){try{s=o.getProperty("dimVec_")}catch(e){i.push(e.message),"Dimension does not have requested property(dimVec_)"===e.message&&(s=null)}s&&(n=a.getInstance().getUnitsByDimension(s),t&&(n=n.filter(e=>-1!==t.indexOf(e.category_))))}else i.push("No commensurable units were found for "+e)}else i.push(`Could not find unit ${e}.`);return[n,i]}}t.l=u,u.getInstance=function(){return new u}},5047:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ucumJsonDefs=t.UcumJsonDefs=void 0;var n=i(6660),s=i(2330),r=i(8417),o=i(9004),a=i(1407).YH;class l{loadJsonDefs(){let e=i(6633);if(e.prefixes=a(e.prefixes),e.units=a(e.units),0===o.UnitTables.getInstance().unitsCount()){let t=s.PrefixTables.getInstance(),i=e.prefixes,a=i.length;for(let e=0;e<a;e++){let s=new n.Prefix(i[e]);t.add(s)}let l=o.UnitTables.getInstance(),u=e.units,_=u.length;for(let e=0;e<_;e++){let t=new r.Unit(u[e]);l.addUnit(t)}}}}t.UcumJsonDefs=l,t.ucumJsonDefs=new l},5098:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class i{constructor(){this.funcs={},this.funcs.cel={cnvTo:function(e){return e-273.15},cnvFrom:function(e){return e+273.15}},this.funcs.degf={cnvTo:function(e){return e-459.67},cnvFrom:function(e){return e+459.67}},this.funcs.degre={cnvTo:function(e){return e-273.15},cnvFrom:function(e){return e+273.15}},this.funcs.ph={cnvTo:function(e){return-Math.log(e)/Math.LN10},cnvFrom:function(e){return Math.pow(10,-e)}},this.funcs.ln={cnvTo:function(e){return Math.log(e)},cnvFrom:function(e){return Math.exp(e)}},this.funcs["2ln"]={cnvTo:function(e){return 2*Math.log(e)},cnvFrom:function(e){return Math.exp(e/2)}},this.funcs.lg={cnvTo:function(e){return Math.log(e)/Math.LN10},cnvFrom:function(e){return Math.pow(10,e)}},this.funcs["10lg"]={cnvTo:function(e){return 10*Math.log(e)/Math.LN10},cnvFrom:function(e){return Math.pow(10,e/10)}},this.funcs["20lg"]={cnvTo:function(e){return 20*Math.log(e)/Math.LN10},cnvFrom:function(e){return Math.pow(10,e/20)}},this.funcs["2lg"]={cnvTo:function(e){return 2*Math.log(e)/Math.LN10},cnvFrom:function(e){return Math.pow(10,e/2)}},this.funcs.lgtimes2=this.funcs["2lg"],this.funcs.ld={cnvTo:function(e){return Math.log(e)/Math.LN2},cnvFrom:function(e){return Math.pow(2,e)}},this.funcs["100tan"]={cnvTo:function(e){return 100*Math.tan(e)},cnvFrom:function(e){return Math.atan(e/100)}},this.funcs.tanTimes100=this.funcs["100tan"],this.funcs.sqrt={cnvTo:function(e){return Math.sqrt(e)},cnvFrom:function(e){return e*e}},this.funcs.inv={cnvTo:function(e){return 1/e},cnvFrom:function(e){return 1/e}},this.funcs.hpX={cnvTo:function(e){return-this.funcs.lg(e)},cnvFrom:function(e){return Math.pow(10,-e)}},this.funcs.hpC={cnvTo:function(e){return-this.func.ln(e)/this.funcs.ln(100)},cnvFrom:function(e){return Math.pow(100,-e)}},this.funcs.hpM={cnvTo:function(e){return-this.funcs.ln(e)/this.funcs.ln(1e3)},cnvFrom:function(e){return Math.pow(1e3,-e)}},this.funcs.hpQ={cnvTo:function(e){return-this.funcs.ln(e)/this.funcs.ln(5e4)},cnvFrom:function(e){return Math.pow(5e4,-e)}}}forName(e){e=e.toLowerCase();let t=this.funcs[e];if(null===t)throw Error(`Requested function ${e} is not defined`);return t}isDefined(e){return e=e.toLowerCase(),null!==this.funcs[e]}}t.default=new i},5449:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Ucum=void 0,t.Ucum={dimLen_:7,validOps_:[".","/"],codeSep_:": ",valMsgStart_:"Did you mean ",valMsgEnd_:"?",cnvMsgStart_:"We assumed you meant ",cnvMsgEnd_:".",openEmph_:" ->",closeEmph_:"<- ",openEmphHTML_:' <span class="emphSpan">',closeEmphHTML_:"</span> ",bracesMsg_:"FYI - annotations (text in curly braces {}) are ignored, except that an annotation without a leading symbol implies the default unit 1 (the unity).",needMoleWeightMsg_:"Did you wish to convert between mass and moles?  The molecular weight of the substance represented by the units is required to perform the conversion.",needEqWeightMsg_:"Did you wish to convert with equivalents?  The molecular weight of the substance is required to perform the conversion.",needEqChargeMsg_:"Did you wish to convert with equivalents?  The charge of the substance is required to perform the conversion.",csvCols_:{"case-sensitive code":"csCode_","LOINC property":"loincProperty_","name (display)":"name_",synonyms:"synonyms_",source:"source_",category:"category_",Guidance:"guidance_"},inputKey_:"case-sensitive code",specUnits_:{"B[10.nV]":"specialUnitOne","[m/s2/Hz^(1/2)]":"specialUnitTwo"}}},6103:(e,t)=>{"use strict";function i(e){return e>=65&&e<=90||95===e||e>=97&&e<=122||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=767||e>=880&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}Object.defineProperty(t,"__esModule",{value:!0}),t.NC_NAME_START_CHAR="A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�\uD800\uDC00-\uDB7F\uDFFF",t.NC_NAME_CHAR="-"+t.NC_NAME_START_CHAR+".0-9\xb7̀-ͯ‿-⁀",t.NC_NAME_START_CHAR_RE=RegExp("^["+t.NC_NAME_START_CHAR+"]$","u"),t.NC_NAME_CHAR_RE=RegExp("^["+t.NC_NAME_CHAR+"]$","u"),t.NC_NAME_RE=RegExp("^["+t.NC_NAME_START_CHAR+"]["+t.NC_NAME_CHAR+"]*$","u"),t.isNCNameStartChar=i,t.isNCNameChar=function(e){return i(e)||45===e||46===e||e>=48&&e<=57||183===e||e>=768&&e<=879||e>=8255&&e<=8256}},6268:(e,t)=>{"use strict";function i(e){return e>=65&&e<=90||e>=97&&e<=122||58===e||95===e||8204===e||8205===e||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=767||e>=880&&e<=893||e>=895&&e<=8191||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}Object.defineProperty(t,"__esModule",{value:!0}),t.CHAR="\x01-퟿-�\uD800\uDC00-\uDBFF\uDFFF",t.RESTRICTED_CHAR="\x01-\b\v\f\x0e-\x1f\x7f-\x84\x86-\x9f",t.S=" 	\r\n",t.NAME_START_CHAR=":A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-˿Ͱ-ͽͿ-῿‌‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�\uD800\uDC00-\uDB7F\uDFFF",t.NAME_CHAR="-"+t.NAME_START_CHAR+".0-9\xb7̀-ͯ‿-⁀",t.CHAR_RE=RegExp("^["+t.CHAR+"]$","u"),t.RESTRICTED_CHAR_RE=RegExp("^["+t.RESTRICTED_CHAR+"]$","u"),t.S_RE=RegExp("^["+t.S+"]+$","u"),t.NAME_START_CHAR_RE=RegExp("^["+t.NAME_START_CHAR+"]$","u"),t.NAME_CHAR_RE=RegExp("^["+t.NAME_CHAR+"]$","u"),t.NAME_RE=RegExp("^["+t.NAME_START_CHAR+"]["+t.NAME_CHAR+"]*$","u"),t.NMTOKEN_RE=RegExp("^["+t.NAME_CHAR+"]+$","u"),t.S_LIST=[32,10,13,9],t.isChar=function(e){return e>=1&&e<=55295||e>=57344&&e<=65533||e>=65536&&e<=1114111},t.isRestrictedChar=function(e){return e>=1&&e<=8||11===e||12===e||e>=14&&e<=31||e>=127&&e<=132||e>=134&&e<=159},t.isCharAndNotRestricted=function(e){return 9===e||10===e||13===e||e>31&&e<127||133===e||e>159&&e<=55295||e>=57344&&e<=65533||e>=65536&&e<=1114111},t.isS=function(e){return 32===e||10===e||13===e||9===e},t.isNameStartChar=i,t.isNameChar=function(e){return i(e)||e>=48&&e<=57||45===e||46===e||183===e||e>=768&&e<=879||e>=8255&&e<=8256}},6469:(e,t,i)=>{"use strict";t.f=void 0;var n=i(5449),s=i(960);class r{constructor(e){if(0===n.Ucum.dimLen_)throw Error("Dimension.setDimensionLen must be called before Dimension constructor");if(null==e)this.assignZero();else if(e instanceof Array){if(e.length!==n.Ucum.dimLen_)throw Error(`Parameter error, incorrect length of vector passed to Dimension constructor, vector = ${JSON.stringify(e)}`);this.dimVec_=[];for(let t=0;t<n.Ucum.dimLen_;t++)this.dimVec_.push(e[t])}else if(s(e)){if(e<0||e>=n.Ucum.dimLen_)throw Error("Parameter error, invalid element number specified for Dimension constructor");this.assignZero(),this.dimVec_[e]=1}}setElementAt(e,t){if(!s(e)||e<0||e>=n.Ucum.dimLen_)throw Error(`Dimension.setElementAt called with an invalid index position (${e})`);this.dimVec_||this.assignZero(),null==t&&(t=1),this.dimVec_[e]=t}getElementAt(e){if(!s(e)||e<0||e>=n.Ucum.dimLen_)throw Error(`Dimension.getElementAt called with an invalid index position (${e})`);let t=null;return this.dimVec_&&(t=this.dimVec_[e]),t}getProperty(e){return this["_"===e.charAt(e.length-1)?e:e+"_"]}toString(){let e=null;return this.dimVec_&&(e="["+this.dimVec_.join(", ")+"]"),e}add(e){if(!e instanceof r)throw Error(`Dimension.add called with an invalid parameter - ${typeof e} instead of a Dimension object`);if(this.dimVec_&&e.dimVec_)for(let t=0;t<n.Ucum.dimLen_;t++)this.dimVec_[t]+=e.dimVec_[t];return this}sub(e){if(!e instanceof r)throw Error(`Dimension.sub called with an invalid parameter - ${typeof e} instead of a Dimension object`);if(this.dimVec_&&e.dimVec_)for(let t=0;t<n.Ucum.dimLen_;t++)this.dimVec_[t]-=e.dimVec_[t];return this}minus(){if(this.dimVec_)for(let e=0;e<n.Ucum.dimLen_;e++)this.dimVec_[e]=-this.dimVec_[e];return this}mul(e){if(!s(e))throw Error(`Dimension.sub called with an invalid parameter - ${typeof dim2} instead of a number`);if(this.dimVec_)for(let t=0;t<n.Ucum.dimLen_;t++)this.dimVec_[t]*=e;return this}equals(e){if(!e instanceof r)throw Error(`Dimension.equals called with an invalid parameter - ${typeof e} instead of a Dimension object`);let t=!0,i=e.dimVec_;if(this.dimVec_&&i)for(let e=0;t&&e<n.Ucum.dimLen_;e++)t=this.dimVec_[e]===i[e];else t=null===this.dimVec_&&null===i;return t}assignDim(e){if(!e instanceof r)throw Error(`Dimension.assignDim called with an invalid parameter - ${typeof e} instead of a Dimension object`);if(null===e.dimVec_)this.dimVec_=null;else{null===this.dimVec_&&(this.dimVec_=[]);for(let t=0;t<n.Ucum.dimLen_;t++)this.dimVec_[t]=e.dimVec_[t]}return this}assignZero(){(null===this.dimVec_||void 0===this.dimVec_)&&(this.dimVec_=[]);for(let e=0;e<n.Ucum.dimLen_;e++)this.dimVec_.push(0);return this}isZero(){let e=null!==this.dimVec_;if(this.dimVec_)for(let t=0;e&&t<n.Ucum.dimLen_;t++)e=0===this.dimVec_[t];return e}isNull(){return null===this.dimVec_}clone(){let e=new r;return e.assignDim(this),e}}t.f=r},6488:(e,t,i)=>{"use strict";t.o=void 0;var n=s(i(4537));function s(e,t){if("function"==typeof WeakMap)var i=new WeakMap,n=new WeakMap;return(s=function(e,t){if(!t&&e&&e.__esModule)return e;var s,r,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(s=t?n:i){if(s.has(e))return s.get(e);s.set(e,o)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((r=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(r.get||r.set)?s(o,t,r):o[t]=e[t]);return o})(e,t)}function r(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var o=i(5449).Ucum,a=i(8417).Unit,l=i(9004).UnitTables,u=i(2330).PrefixTables;class _{constructor(){this.utabs_=l.getInstance(),this.pfxTabs_=u.getInstance(),this.openEmph_=o.openEmph_,this.closeEmph_=o.closeEmph_,this.bracesMsg_="",this.parensFlag_="parens_placeholder",this.pFlagLen_=this.parensFlag_.length,this.braceFlag_="braces_placeholder",this.bFlagLen_=this.braceFlag_.length,this.vcMsgStart_=null,this.vcMsgEnd_=null,this.retMsg_=[],this.parensUnits_=[],this.annotations_=[],this.suggestions=[]}useHTMLInMessages(e){void 0===e||e?(this.openEmph_=o.openEmphHTML_,this.closeEmph_=o.closeEmphHTML_):(this.openEmph_=o.openEmph_,this.closeEmph_=o.closeEmph_)}useBraceMsgForEachString(e){void 0===e||e?this.bracesMsg_=o.bracesMsg_:this.bracesMsg_=""}parseString(e,t,i){if(""===(e=e.trim())||null===e)throw Error("Please specify a unit expression to be validated.");"validate"===t?(this.vcMsgStart_=o.valMsgStart_,this.vcMsgEnd_=o.valMsgEnd_):(this.vcMsgStart_=o.cnvMsgStart_,this.vcMsgEnd_=o.cnvMsgEnd_),void 0===i||!1===i?this.suggestions_=null:this.suggestions_=[],this.retMsg_=[],this.parensUnits_=[],this.annotations_=[];let s=e,r=[];if(e=this._getAnnotations(e),this.retMsg_.length>0)r[0]=null,r[1]=null;else{this.retMsg_.length;let t=null;for(t in o.specUnits_)for(;-1!==e.indexOf(t);)e=e.replace(t,o.specUnits_[t]);if(e.indexOf(" ")>-1)throw Error("Blank spaces are not allowed in unit expressions.");let i=(r=this._parseTheString(e,s))[0];(n.isIntegerUnit(i)||"number"==typeof i)&&(i=new a({csCode_:s,ciCode_:s,magnitude_:i,name_:s}),r[0]=i)}return r[2]=this.retMsg_,this.suggestions_&&this.suggestions_.length>0&&(r[3]=this.suggestions_),r}_parseTheString(e,t){let i=null,s=this.retMsg_.length>0,r=this._processParens(e,t);s=r[2];let o=[];if(!s){e=r[0],t=r[1];let i=this._makeUnitsArray(e,t);if(!(s=i[2])){o=i[0],t=i[1];let e=o.length;for(let i=0;i<e;i++){let e=o[i].un;if(n.isIntegerUnit(e))o[i].un=Number(e);else if(e.indexOf(this.parensFlag_)>=0){let n=this._getParensUnit(e,t);s||(s=n[1]),s||(o[i].un=n[0])}else{let n=this._makeUnit(e,t);null===n[0]?s=!0:(o[i].un=n[0],t=n[1])}}}}return s||null!==o[0]&&" "!==o[0]&&void 0!==o[0].un&&null!==o[0].un||0!==this.retMsg_.length||(this.retMsg_.push(`Unit string (${t}) did not contain anything that could be used to create a unit, or else something that is not handled yet by this package.  Sorry`),s=!0),s||(i=this._performUnitArithmetic(o,t)),[i,t]}_getAnnotations(e){let t=e.indexOf("{");for(;t>=0;){let i=e.indexOf("}");if(i<0)this.retMsg_.push("Missing closing brace for annotation starting at "+this.openEmph_+e.substr(t)+this.closeEmph_),t=-1;else{let n=e.substring(t,i+1);if(_.VALID_ANNOTATION_REGEX.test(n)){let i=this.annotations_.length.toString();e=e.replace(n,this.braceFlag_+i+this.braceFlag_),this.annotations_.push(n),t=e.indexOf("{")}else this.retMsg_.push(_.INVALID_ANNOTATION_CHAR_MSG+this.openEmph_+n+this.closeEmph_),t=-1}}if(0==this.retMsg_.length){let t=e.indexOf("}");t>=0&&this.retMsg_.push("Missing opening brace for closing brace found at "+this.openEmph_+e.substring(0,t+1)+this.closeEmph_)}return e}_processParens(e,t){let i=[],n=0,s=!1,r=this.parensUnits_.length,o=0;for(;""!==e&&!s;){let a=0,l=0,u=e.indexOf("(");if(u<0){let t=e.indexOf(")");if(t>=0){let r=`Missing open parenthesis for close parenthesis at ${e.substring(0,t+o)}${this.openEmph_}${e.substr(t,1)}${this.closeEmph_}`;t<e.length-1&&(r+=`${e.substr(t+1)}`),this.retMsg_.push(r),i[n]=e,s=!0}else i[n]=e,e=""}else{a+=1;let _=e.length;u>0&&(i[n++]=e.substr(0,u));let c=0,h=u+1;for(;h<_&&a!=l;h++)"("===e[h]?a+=1:")"===e[h]&&(l+=1);if(a===l){c=h,i[n++]=this.parensFlag_+r.toString()+this.parensFlag_;let a=this._parseTheString(e.substring(u+1,c-1),t);null===a[0]?s=!0:"/"===e[u+1]?(this.retMsg_.push("Unary operator '/' is only allowed at the beginning of the main term, not inside a parenthesis."),s=!0):(t=a[1],this.parensUnits_[r++]=a[0],e=e.substr(c),o=c)}else i.push(t.substr(u)),this.retMsg_.push(`Missing close parenthesis for open parenthesis at ${t.substring(0,u+o)}${this.openEmph_}${t.substr(u,1)}${this.closeEmph_}${t.substr(u+1)}`),s=!0}}return s&&(this.parensUnits_=[]),[i.join(""),t,s]}_makeUnitsArray(e,t){let i=e.match(/([./]|[^./]+)/g),s=!1,r=[],a=/(^[0-9]+)(\[?[a-zA-Z\_0-9a-zA-Z\_]+\]?$)/;if("/"===i[0]?i.unshift("1"):"."===i[0]&&(this.retMsg_.push(`${t} is not a valid UCUM code. The multiplication operator at the beginning of the expression is not valid. A multiplication operator must appear only between two codes.`),s=!0),!s){if(!n.isNumericString(i[0])){let e=i[0].match(a);if(e&&3===e.length&&""!==e[1]&&""!==e[2]&&0!==e[2].indexOf(this.braceFlag_)){let n=e[2];if(!s&&-1!==e[2].indexOf(this.parensFlag_)){let i=this._getParensUnit(e[2],t);e[2]=i[0].csCode_,n=`(${e[2]})`,s=i[1]}s||(this.retMsg_.push(`${e[1]}${n} is not a valid UCUM code.  ${this.vcMsgStart_}${e[1]}.${n}${this.vcMsgEnd_}`),t=t.replace(`${e[1]}${n}`,`${e[1]}.${n}`),i[0]=e[2],i.unshift(e[1],"."))}}if(!s){let e=i.length;r=[{op:"",un:i[0]}];for(let l=1;l<e;l++){let u=i[l++];if(i[l])if(-1!==o.validOps_.indexOf(i[l]))this.retMsg_.push(`${t} is not a valid UCUM code. A unit code is missing between${this.openEmph_}${u}${this.closeEmph_}and${this.openEmph_}${i[l]}${this.closeEmph_}in${this.openEmph_}${u}${i[l]}${this.closeEmph_}.`),l=e,s=!0;else if(n.isNumericString(i[l]))r.push({op:u,un:i[l]});else{let n=i[l].match(a);if(n&&3===n.length&&""!==n[1]&&""!==n[2]&&0!==n[2].indexOf(this.braceFlag_)){let i=n[0];if(s||-1===n[2].indexOf(this.parensFlag_)){let i="("+n[1]+"."+n[2]+")",o=this._processParens(i,t);o[2]?(l=e,s=!0):(this.retMsg_.push(`${n[0]} is not a valid UCUM code.  ${this.vcMsgStart_}${n[1]}.${n[2]}${this.vcMsgEnd_}`),t=t.replace(n[0],i),r.push({op:u,un:o[0]}))}else{let e=this._getParensUnit(n[2],t);if(n[2]=e[0].csCode_,i=`(${n[2]})`,!(s=e[1])){this.retMsg_.push(`${n[1]}${i} is not a valid UCUM code.  ${this.vcMsgStart_}${n[1]}.${i}${this.vcMsgEnd_}`);let e=`(${n[1]}.${i})`;t=t.replace(`${n[1]}${i}`,e);let o=this._processParens(e,t);(s=o[2])||r.push({op:u,un:o[0]})}}}else r.push({op:u,un:i[l]})}else this.retMsg_.push(`${t} is not a valid UCUM code. It is terminated with the operator ${this.openEmph_}${u}${this.closeEmph_}.`),l=e,s=!0}}}return[r,t,s]}_getParensUnit(e,t){let i=!1,s=null,r=e.indexOf(this.parensFlag_),o=null;r>0&&(o=e.substring(0,r));let l=e.lastIndexOf(this.parensFlag_),u=null;l+this.pFlagLen_<e.length&&(u=e.substr(l+this.pFlagLen_));let _=e.substring(r+this.pFlagLen_,l);if(n.isNumericString(_))s=this.parensUnits_[Number(_)],e=n.isIntegerUnit(s)?s:s.csCode_;else throw Error(`Processing error - invalid parens number ${_} found in ${e}.`);if(o)if(n.isNumericString(o)){let t=s.getProperty("magnitude_");t*=Number(o),s.assignVals({magnitude_:t}),e=`${o}.${e}`,this.retMsg_.push(`${o}${e} is not a valid UCUM code.
`+this.vcMsgStart_+e+this.vcMsgEnd_)}else if(o.indexOf(this.braceFlag_)>=0){let i=this._getAnnoText(o,t);if(i[1]||i[2])throw Error(`Text found before the parentheses (${o}) included an annotation along with other text for parenthetical unit ${s.csCode_}`);e+=i[0],this.retMsg_.push(`The annotation ${i[0]} before the unit code is invalid.
`+this.vcMsgStart_+e+this.vcMsgEnd_)}else this.retMsg_.push(`${o} preceding the unit code ${e} is invalid.  Unable to make a substitution.`),i=!0;if(u)if(u.indexOf(this.braceFlag_)>=0){let i=this._getAnnoText(u,t);if(i[1]||i[2])throw Error(`Text found after the parentheses (${u}) included an annotation along with other text for parenthetical unit ${s.csCode_}`);e+=i[0]}else if(n.isNumericString(u)){s=null;let t=`An exponent (${u}) following a parenthesis is invalid as of revision 1.9 of the UCUM Specification.`;e.match(/\d$/)||(e+=u,t+="\n  "+this.vcMsgStart_+e+this.vcMsgEnd_),this.retMsg_.push(t),i=!0}else this.retMsg_.push(`Text ${u} following the unit code ${e} is invalid.  Unable to make a substitution.`),i=!0;return i||(s?n.isIntegerUnit(s)?s=new a({csCode_:s,magnitude_:s,name_:s}):s.csCode_=e:s=new a({csCode_:e,magnitude_:1,name_:e})),[s,i]}_getAnnoText(e,t){let i=e.indexOf(this.braceFlag_),s=i>0?e.substring(0,i):null;0!==i&&(e=e.substr(i));let r=e.indexOf(this.braceFlag_,1),o=r+this.bFlagLen_<e.length?e.substr(r+this.bFlagLen_):null,a=e.substring(this.bFlagLen_,r),l=Number(a);if(!n.isNumericString(a)||l>=this.annotations_.length)throw Error(`Processing Error - invalid annotation index ${a} found in ${e} that was created from ${t}`);return[e=this.annotations_[l],s,o]}_getSuggestions(e){let t=n.getSynonyms(e);if("succeeded"===t.status){let i={};i.msg=`${e} is not a valid UCUM code.  We found possible units that might be what was meant:`,i.invalidUnit=e;let n=t.units.length;i.units=[];for(let e=0;e<n;e++){let n=t.units[e],s=[n.code,n.name,n.guidance];i.units.push(s)}this.suggestions_.push(i)}else this.retMsg_.push(`${e} is not a valid UCUM code.  No alternatives were found.`);return t.status}_makeUnit(e,t){let i=this.utabs_.getUnitByCode(e);if(i)i=i.clone();else if(e.indexOf(this.braceFlag_)>=0){let n=this._getUnitWithAnnotation(e,t);(i=n[0])&&(t=n[1])}else{if(e.indexOf("^")>-1){let t=e.replace("^","*");(i=this.utabs_.getUnitByCode(t))&&((i=i.clone()).csCode_=i.csCode_.replace("*","^"),i.ciCode_=i.ciCode_.replace("*","^"))}if(!i){let n="["+e+"]";(i=this.utabs_.getUnitByCode(n))&&(i=i.clone(),t=t.replace(e,n),this.retMsg_.push(`${e} is not a valid unit expression, but ${n} is.
`+this.vcMsgStart_+`${n} (${i.name_})${this.vcMsgEnd_}`))}if(!i){let n=this.utabs_.getUnitByName(e);if(n&&n.length>0){i=n[0].clone();let s="The UCUM code for "+e+" is "+i.csCode_+".\n"+this.vcMsgStart_+i.csCode_+this.vcMsgEnd_,r=!1;for(let e=0;e<this.retMsg_.length&&!r;e++)r=this.retMsg_[e]===s;r||this.retMsg_.push(s);let o=RegExp("(^|[./({])("+e+")($|[./)}])"),a=t.match(o);t=t.replace(o,a[1]+i.csCode_+a[3]),e=i.csCode_}}if(!i){let t=null;for(t in o.specUnits_)-1!==e.indexOf(o.specUnits_[t])&&(e=e.replace(o.specUnits_[t],t));(i=this.utabs_.getUnitByCode(e))&&(i=i.clone())}if(!i){let t=e,s=null,r=null,o=null,l=null,u=null,_=null,c=this._isCodeWithExponent(e),h=!1;if(c&&(e=c[0],r=c[1],s=(h=n.isIntegerUnit(e))?new a({csCode_:e,ciCode_:e,magnitude_:Number(e),name_:e}):this.utabs_.getUnitByCode(e)),r&&isNaN(r))i=null,this.retMsg_.push(`${t} is not a valid UCUM code.`);else{if(!s&&(o=e.charAt(0),l=this.pfxTabs_.getPrefixByCode(o))){u=l.getValue(),_=l.getExp();let t=o.length;e=e.substr(t),(s=this.utabs_.getUnitByCode(e))||"d"!=o||"a"!=e.substr(0,1)||(o="da",u=(l=this.pfxTabs_.getPrefixByCode(o)).getValue(),e=e.substr(1),s=this.utabs_.getUnitByCode(e)),s&&"LOINC"==s.source_&&(s=null)}if(s){(i=s.clone()).resetFieldsForDerivedUnit();let e=i.getProperty("dim_"),t=i.getProperty("magnitude_"),n=i.getProperty("name_"),a=i.getProperty("ciCode_"),c=i.getProperty("printSymbol_");if(r){let n=r=parseInt(r);e&&(e=e.mul(r)),i.equivalentExp_*=r,i.moleExp_*=r,t=Math.pow(t,r),i.assignVals({magnitude_:t}),l&&_&&(n*=l.getExp(),u=Math.pow(10,n))}l&&(i.cnv_?i.assignVals({cnvPfx_:u}):(t*=u,i.assignVals({magnitude_:t})));let d=i.csCode_;if(l&&(n=l.getName()+n,d=o+d,a=l.getCiCode()+a,c=l.getPrintSymbol()+c,i.assignVals({name_:n,csCode_:d,ciCode_:a,printSymbol_:c})),r){let e=r.toString(),t=h&&r>0?"+":"";i.assignVals({name_:n+"<sup>"+e+"</sup>",csCode_:d+t+e,ciCode_:a+t+e,printSymbol_:c+"<sup>"+e+"</sup>"})}}else i=null,this.suggestions_?this._getSuggestions(t):this.retMsg_.push(`${t} is not a valid UCUM code.`)}}}return[i,t]}_getUnitWithAnnotation(e,t){let i=null,s=this._getAnnoText(e,t),r=s[0],o=s[1],l=s[2];this.bracesMsg_&&-1===this.retMsg_.indexOf(this.bracesMsg_)&&this.retMsg_.push(this.bracesMsg_);let u=this.retMsg_.length;if(o||l)if(o&&!l)if(n.isIntegerUnit(o))i=new a({csCode_:o+r,ciCode_:o+r.toUpperCase(),magnitude_:Number(o),name_:o+r});else{let e=this._makeUnit(o,t);e[0]?(i=e[0],i.csCode_+=r,t=e[1]):this.retMsg_.push(`Unable to find a unit for ${o} that precedes the annotation ${r}.`)}else if(!o&&l)if(n.isIntegerUnit(l))i=l+r,this.retMsg_.push(`The annotation ${r} before the ``${l} is invalid.\n`+this.vcMsgStart_+i+this.vcMsgEnd_);else{let e=this._makeUnit(l,t);e[0]?(i=e[0],i.csCode_+=r,t=i.csCode_,this.retMsg_.push(`The annotation ${r} before the unit code is invalid.
`+this.vcMsgStart_+i.csCode_+this.vcMsgEnd_)):this.retMsg_.push(`Unable to find a unit for ${o} that follows the annotation ${r}.`)}else this.retMsg_.push(`Unable to find a unit for ${o}${r}${l}.
We are not sure how to interpret text both before and after the annotation.  Sorry`);else{let n="["+r.substring(1,r.length-1)+"]",s=this._makeUnit(n,t);s[0]?(i=e,this.retMsg_.push(`${r} is a valid unit expression, but did you mean ${n} (${s[0].name_})?`)):this.retMsg_.length>u&&this.retMsg_.pop(),i=new a({csCode_:r,ciCode_:r,magnitude_:1,name_:r})}return[i,t]}_performUnitArithmetic(e,t){let i=e[0].un;n.isIntegerUnit(i)&&(i=new a({csCode_:i,ciCode_:i,magnitude_:Number(i),name_:i}));let s=e.length,r=!1;for(let o=1;o<s&&!r;o++){let s=e[o].un;if(n.isIntegerUnit(s)&&(s=new a({csCode_:s,ciCode_:s,magnitude_:Number(s),name_:s})),null!==s&&("number"==typeof s||s.getProperty))try{let t=e[o].op;i="/"===t?i.divide(s):i.multiplyThese(s)}catch(e){this.retMsg_.unshift(e.message),r=!0,i=null}else{let e=`Unit string (${t}) contains unrecognized element`;s&&(e+=` (${this.openEmph_}${s.toString()}${this.closeEmph_})`),e+="; could not parse full string.  Sorry",this.retMsg_.push(e),r=!0}}return i}_isCodeWithExponent(e){let t=[],i=e.match(/(^[^\-\+]+?)([\-\+\d]+)$/);return i&&i[2]&&""!==i[2]?(t.push(i[1]),t.push(i[2])):t=null,t}}t.o=_,r(_,"INVALID_ANNOTATION_CHAR_MSG","An invalid character was found in the annotation "),r(_,"VALID_ANNOTATION_REGEX",/^\{[!-z|~]*\}$/),_.getInstance=function(){return new _}},6660:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Prefix=void 0,i(5449);class n{constructor(e){if(void 0===e.code_||null===e.code_||void 0===e.name_||null===e.name_||void 0===e.value_||null===e.value_||void 0===e.exp_)throw Error("Prefix constructor called missing one or more parameters.  Prefix codes (cs or ci), name, value and exponent must all be specified and all but the exponent must not be null.");this.code_=e.code_,this.ciCode_=e.ciCode_,this.name_=e.name_,this.printSymbol_=e.printSymbol_,"string"==typeof e.value_?this.value_=parseFloat(e.value_):this.value_=e.value_,this.exp_=e.exp_}getValue(){return this.value_}getCode(){return this.code_}getCiCode(){return this.ciCode_}getName(){return this.name_}getPrintSymbol(){return this.printSymbol_}getExp(){return this.exp_}equals(e){return this.code_===e.code_&&this.ciCode_===e.ciCode_&&this.name_===e.name_&&this.printSymbol_===e.printSymbol_&&this.value_===e.value_&&this.exp_===e.exp_}}t.Prefix=n},7389:(e,t,i)=>{"use strict";t.lG=void 0,i(5449).Ucum,t.lG=i(4719).l,i(9004).UnitTables},8417:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Unit=void 0;var n,s=function(e){return e&&e.__esModule?e:{default:e}}(i(5098)),r=o(i(4537));function o(e,t){if("function"==typeof WeakMap)var i=new WeakMap,n=new WeakMap;return(o=function(e,t){if(!t&&e&&e.__esModule)return e;var s,r,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(s=t?n:i){if(s.has(e))return s.get(e);s.set(e,o)}for(let t in e)"default"!==t&&({}).hasOwnProperty.call(e,t)&&((r=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(r.get||r.set)?s(o,t,r):o[t]=e[t]);return o})(e,t)}var a=i(5449).Ucum,l=i(6469).f,u=i(960);class _{constructor(e={}){this.isBase_=e.isBase_||!1,this.name_=e.name_||"",this.csCode_=e.csCode_||"",this.ciCode_=e.ciCode_||"",this.property_=e.property_||"",this.magnitude_=e.magnitude_||1,void 0===e.dim_||null===e.dim_?this.dim_=new l:void 0!==e.dim_.dimVec_?this.dim_=new l(e.dim_.dimVec_):e.dim_ instanceof l?this.dim_=e.dim_:e.dim_ instanceof Array||u(e.dim_)?this.dim_=new l(e.dim_):this.dim_=new l,this.printSymbol_=e.printSymbol_||null,this.class_=e.class_||null,this.isMetric_=e.isMetric_||!1,this.variable_=e.variable_||null,this.cnv_=e.cnv_||null,this.cnvPfx_=e.cnvPfx_||1,this.isSpecial_=e.isSpecial_||!1,this.isArbitrary_=e.isArbitrary_||!1,this.moleExp_=e.moleExp_||0,this.equivalentExp_=e.equivalentExp_||0,this.synonyms_=e.synonyms_||null,this.source_=e.source_||null,this.loincProperty_=e.loincProperty_||null,this.category_=e.category_||null,this.guidance_=e.guidance_||null,this.csUnitString_=e.csUnitString_||null,this.ciUnitString_=e.ciUnitString_||null,this.baseFactorStr_=e.baseFactorStr_||null,this.baseFactor_=e.baseFactor_||null,this.defError_=e.defError_||!1}assignUnity(){return this.name_="",this.magnitude_=1,this.dim_||(this.dim_=new l),this.dim_.assignZero(),this.cnv_=null,this.cnvPfx_=1,this}assignVals(e){for(let t in e){let i=(t.charAt(t.length-1),t);if(this.hasOwnProperty(i))this[i]=e[t];else throw Error(`Parameter error; ${t} is not a property of a Unit`)}}clone(){let e=new _;return Object.getOwnPropertyNames(this).forEach(t=>{"dim_"===t?this.dim_?e.dim_=this.dim_.clone():e.dim_=null:e[t]=this[t]}),e}assign(e){Object.getOwnPropertyNames(e).forEach(t=>{"dim_"===t?e.dim_?this.dim_=e.dim_.clone():this.dim_=null:this[t]=e[t]})}equals(e){return this.magnitude_===e.magnitude_&&this.cnv_===e.cnv_&&this.cnvPfx_===e.cnvPfx_&&(null===this.dim_&&null===e.dim_||this.dim_.equals(e.dim_))}fullEquals(e){let t=Object.keys(this).sort(),i=Object.keys(e).sort(),n=t.length,s=n===i.length;for(let r=0;r<n&&s;r++)s=t[r]===i[r]&&("dim_"===t[r]?this.dim_.equals(e.dim_):this[t[r]]===e[t[r]]);return s}getProperty(e){return this["_"===e.charAt(e.length-1)?e:e+"_"]}convertFrom(e,t){let i;if(this.isArbitrary_)throw Error(`Attempt to convert to arbitrary unit "${this.csCode_}"`);if(t.isArbitrary_)throw Error(`Attempt to convert arbitrary unit "${t.csCode_}"`);if(t.dim_&&this.dim_&&!t.dim_.equals(this.dim_))if(this.isMolMassCommensurable(t))throw Error(a.needMoleWeightMsg_);else throw Error(`Sorry.  ${t.csCode_} cannot be converted to ${this.csCode_}.`);if(t.dim_&&(!this.dim_||this.dim_.isNull())||this.dim_&&(!t.dim_||t.dim_.isNull()))throw Error(`Sorry.  ${t.csCode_} cannot be converted to ${this.csCode_}.`);let n=t.cnv_,r=t.magnitude_;return i=null!=n?s.default.forName(n).cnvFrom(e*t.cnvPfx_)*r:e*r,null!=this.cnv_?s.default.forName(this.cnv_).cnvTo(i/this.magnitude_)/this.cnvPfx_:i/this.magnitude_}convertTo(e,t){return t.convertFrom(e,this)}convertCoherent(e){return null!==this.cnv_&&(e=this.cnv_.f_from(e/this.cnvPfx_)*this.magnitude_),e}mutateCoherent(e){e=this.convertCoherent(e),this.magnitude_=1,this.cnv_=null,this.cnvPfx_=1,this.name_="";for(let e=0,t=l.getMax();e<t;e++){let t=this.dim_.getElementAt(e),i=this._getUnitTables().getUnitsByDimension(new l(e));if(null==i)throw Error(`Can't find base unit for dimension ${e}`);this.name_=i.name+t}return e}convertMolMass(e,t,i){let n=this.moleExp_-t.moleExp_,s=Math.pow(i/this._getUnitTables().getUnitByCode("mol").magnitude_,n);return this.magnitude_/t.magnitude_*s*e}convertEqMass(e,t,i,n){let s=t.equivalentExp_-this.equivalentExp_,r=this._getUnitTables().getUnitByCode("mol").magnitude_;return this.magnitude_*e/Math.pow(i/n,s)/(t.magnitude_/Math.pow(r,s))}convertEqMolMass(e,t,i,n){let s=e/Math.pow(n,this.equivalentExp_-t.equivalentExp_),r=this._getUnitTables(),o=r.getMassDimensionIndex(),a=this.dim_.getElementAt(o)-t.dim_.getElementAt(o),l=Math.pow(i/r.getUnitByCode("mol").magnitude_,-a);return this.magnitude_/t.magnitude_*l*s}isEquivalentUnit(){return 0!==this.equivalentExp_}isMolarUnit(){return 0!==this.moleExp_}convertEqMol(e,t,i){let n=this.equivalentExp_-t.equivalentExp_;return e*(this.magnitude_/t.magnitude_)/Math.pow(i,n)}mutateRatio(e){return null==this.cnv_?this.mutateCoherent(e):e}multiplyThis(e){let t=this.clone();null!=t.cnv_?t.cnvPfx_*=e:t.magnitude_*=e;let i=e.toString();return t.name_=this._concatStrs(i,"*",this.name_,"[","]"),t.csCode_=this._concatStrs(i,".",this.csCode_,"(",")"),t.ciCode_=this._concatStrs(i,".",this.ciCode_,"(",")"),t.printSymbol_=this._concatStrs(i,".",this.printSymbol_,"(",")"),t}multiplyThese(e){var t=this.clone();if(null!=t.cnv_)if(null==e.cnv_&&(!e.dim_||e.dim_.isZero()))t.cnvPfx_*=e.magnitude_;else throw Error(`Attempt to multiply non-ratio unit ${t.name_} failed.`);else if(null!=e.cnv_)if(!t.dim_||t.dim_.isZero())t.cnvPfx_=e.cnvPfx_*t.magnitude_,t.magnitude_=e.magnitude_,t.cnv_=e.cnv_;else throw Error(`Attempt to multiply non-ratio unit ${e.name_}`);else t.magnitude_*=e.magnitude_;return t.dim_&&(!t.dim_||t.dim_.dimVec_)?e.dim_&&e.dim_ instanceof l&&t.dim_.add(e.dim_):e.dim_?t.dim_=e.dim_.clone():t.dim_=e.dim_,t.equivalentExp_+=e.equivalentExp_,t.moleExp_+=e.moleExp_,t.name_=this._concatStrs(t.name_,"*",e.name_,"[","]"),t.csCode_=this._concatStrs(t.csCode_,".",e.csCode_,"(",")"),t.ciCode_&&e.ciCode_?t.ciCode_=this._concatStrs(t.ciCode_,".",e.ciCode_,"(",")"):e.ciCode_&&(t.ciCode_=e.ciCode_),t.resetFieldsForDerivedUnit(),t.printSymbol_&&e.printSymbol_?t.printSymbol_=this._concatStrs(t.printSymbol_,".",e.printSymbol_,"(",")"):e.printSymbol_&&(t.printSymbol_=e.printSymbol_),t.isArbitrary_||(t.isArbitrary_=e.isArbitrary_),t.isSpecial_||(t.isSpecial_=e.isSpecial_),t}resetFieldsForDerivedUnit(){this.guidance_="",this.synonyms_=null,this.isBase_=!1}divide(e){var t=this.clone();if(null!=t.cnv_)throw Error(`Attempt to divide non-ratio unit ${t.name_}`);if(null!=e.cnv_)throw Error(`Attempt to divide by non-ratio unit ${e.name_}`);return t.name_&&e.name_?t.name_=this._concatStrs(t.name_,"/",e.name_,"[","]"):e.name_&&(t.name_=e.invertString(e.name_)),t.csCode_=this._concatStrs(t.csCode_,"/",e.csCode_,"(",")"),t.ciCode_&&e.ciCode_?t.ciCode_=this._concatStrs(t.ciCode_,"/",e.ciCode_,"(",")"):e.ciCode_&&(t.ciCode_=e.invertString(e.ciCode_)),t.resetFieldsForDerivedUnit(),t.magnitude_/=e.magnitude_,t.printSymbol_&&e.printSymbol_?t.printSymbol_=this._concatStrs(t.printSymbol_,"/",e.printSymbol_,"(",")"):e.printSymbol_&&(t.printSymbol_=e.invertString(e.printSymbol_)),e.dim_&&(t.dim_?(t.dim_.isNull()&&t.dim_.assignZero(),t.dim_=t.dim_.sub(e.dim_)):t.dim_=e.dim_.clone().minus()),t.moleExp_-=e.moleExp_,t.equivalentExp_-=e.equivalentExp_,t.isArbitrary_||(t.isArbitrary_=e.isArbitrary_),t}invert(){var e=this.clone();if(null!=this.cnv_)throw Error(`Attempt to invert a non-ratio unit - ${this.name_}`);return e.name_=this.invertString(this.name_),e.magnitude_=1/this.magnitude_,e.dim_.minus(),e.equivalentExp_=-this.equivalentExp_,e.moleExp_=-this.moleExp_,e}invertString(e){if(e.length>0){let t=e.replace("/","!").replace(".","/").replace("<!","</").replace("!",".");switch(t.charAt(0)){case".":e=t.substr(1);break;case"/":e=t;break;default:e="/"+t}}return e}_concatStrs(e,t,i,n,s){return this._buildOneString(e,n,s)+t+this._buildOneString(i,n,s)}_buildOneString(e,t,i){return r.isNumericString(e)||"("===e.charAt(0)&&e.endsWith(")")||"["===e.charAt(0)&&e.endsWith("]")?e:/[./* ]/.test(e)?t+e+i:e}power(e){if(null!=this.cnv_)throw Error(`Attempt to raise a non-ratio unit, ${this.name_}, to a power.`);var t=this.clone();let i=this.csCode_.match(/([./]|[^./]+)/g),n=i.length;for(let t=0;t<n;t++){let n=i[t];if("/"!==n&&"."!==n){let s=parseInt(n);if(u(s))i[t]=Math.pow(s,e).toString();else{let s=n.length;for(let r=s-1;r>=0;r--)if(!u(parseInt(n[r]))){if(("-"===n[r]||"+"===n[r])&&r--,r<s-1){let s=parseInt(n.substr(r));s=Math.pow(s,e),i[t]=n.substr(0,r)+s.toString(),r=-1}else i[t]+=e.toString(),r=-1;r=-1}}}}return t.csCode_=i.join(""),t.magnitude_=Math.pow(this.magnitude_,e),t.dim_&&t.dim_.mul(e),t.equivalentExp_*=e,t.moleExp_*=e,t}isMolMassCommensurable(e){let t=this._getUnitTables().getMassDimensionIndex(),i=this.dim_.clone();i.setElementAt(t,i.getElementAt(t)+this.moleExp_);let n=e.dim_.clone();return n.setElementAt(t,n.getElementAt(t)+e.moleExp_),i.equals(n)}isEqMassCommensurable(e){let t=this._getUnitTables().getMassDimensionIndex(),i=this.dim_.clone();i.setElementAt(t,i.getElementAt(t)+this.equivalentExp_);let n=e.dim_.clone();return n.setElementAt(t,n.getElementAt(t)+e.equivalentExp_),i.equals(n)}isEqMolCommensurable(e){return this.equivalentExp_+this.moleExp_==e.equivalentExp_+e.moleExp_&&this.dim_.equals(e.dim_)}isEqMolMassCommensurable(e){let t=this._getUnitTables().getMassDimensionIndex(),i=this.dim_.clone();i.setElementAt(t,i.getElementAt(t)+this.equivalentExp_+this.moleExp_);let n=e.dim_.clone();return n.setElementAt(t,n.getElementAt(t)+e.equivalentExp_+e.moleExp_),i.equals(n)}_getUnitTables(){return n||(n=i(9004).UnitTables),n.getInstance()}}t.Unit=_},9004:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnitTables=void 0;var n=i(5449).Ucum;class s{constructor(){this.unitNames_={},this.unitCodes_={},this.codeOrder_=[],this.unitStrings_={},this.unitDimensions_={},this.unitSynonyms_={},this.massDimIndex_=0,this.dimVecIndexToBaseUnit_={}}unitsCount(){return Object.keys(this.unitCodes_).length}addUnit(e){e.name_&&this.addUnitName(e),this.addUnitCode(e),this.addUnitString(e);try{e.dim_.getProperty("dimVec_")&&this.addUnitDimension(e)}catch(e){}if(e.isBase_){let t,i=e.dim_.dimVec_;for(let e=0,n=i.length;void 0==t&&e<n;++e)0!=i[e]&&(t=e);this.dimVecIndexToBaseUnit_[t]=e.csCode_}}addUnitName(e){let t=e.name_;if(t)this.unitNames_[t]?this.unitNames_[t].push(e):this.unitNames_[t]=[e];else throw Error(`UnitTables.addUnitName called for a unit with no name.  Unit code = ${e.csCode_}.`)}addUnitCode(e){let t=e.csCode_;if(t){if(this.unitCodes_[t])throw Error(`UnitTables.addUnitCode called, already contains entry for unit with code = ${t}`);else if(this.unitCodes_[t]=e,this.codeOrder_.push(t),"g"==t){let t=e.dim_.dimVec_,i=0;for(;i<t.length&&t[i]<1;i++);this.massDimIndex_=i}}else throw Error("UnitTables.addUnitCode called for unit that has no code.")}addUnitString(e){let t=null;if(t=!0==n.caseSensitive_?e.csUnitString_:e.ciUnitString_){let i={mag:e.baseFactorStr_,unit:e};this.unitStrings_[t]?this.unitStrings_[t].push(i):this.unitStrings_[t]=[i]}}addUnitDimension(e){let t=e.dim_.getProperty("dimVec_");if(t)this.unitDimensions_[t]?this.unitDimensions_[t].push(e):this.unitDimensions_[t]=[e];else throw Error(`UnitTables.addUnitDimension called for a unit with no dimension.  Unit code = ${e.csCode_}.`)}buildUnitSynonyms(){for(let e in this.unitCodes_){let t=this.unitCodes_[e],i=t.synonyms_;if(i){let t=i.split(";");if(""!==t[0]){let i=t.length;for(let n=0;n<i;n++){let i=t[n].trim();this.addSynonymCodes(e,i)}}}this.addSynonymCodes(e,t.name_)}}addSynonymCodes(e,t){let i=t.split(" "),n=i.length;for(let t=0;t<n;t++){let n=i[t];this.unitSynonyms_[n]?-1===this.unitSynonyms_[n].indexOf(e)&&this.unitSynonyms_[n].push(e):this.unitSynonyms_[n]=[e]}}getUnitByCode(e){let t=null;return e&&(t=this.unitCodes_[e]),t}getUnitByName(e){if(null==e)throw Error("Unable to find unit by name because no name was provided.");let t=e.indexOf(n.codeSep_),i=null;t>=1&&(i=e.substr(t+n.codeSep_.length),e=e.substr(0,t));let s=this.unitNames_[e];if(s){let e=s.length;if(i&&e>1){let t=0;for(;s[t].csCode_!==i&&t<e;t++);s=t<e?[s[t]]:null}}return s}getUnitByString(e){let t=null;return e&&void 0===(t=this.unitStrings_[e])&&(t=null),t}getUnitsByDimension(e){let t=null;if(null==e)throw Error("Unable to find unit by because no dimension vector was provided.");return null==(t=this.unitDimensions_[e])&&console.log(`Unable to find unit with dimension = ${e}`),t}getUnitBySynonym(e){let t={},i=[];try{if(null==e)throw t.status="error",Error("Unable to find unit by synonym because no synonym was provided.");0===Object.keys(this.unitSynonyms_).length&&this.buildUnitSynonyms();let n=[];if(n=this.unitSynonyms_[e]){t.status="succeeded";let e=n.length;for(let t=0;t<e;t++)i.push(this.unitCodes_[n[t]]);t.units=i}0===i.length&&(t.status="failed",t.msg=`Unable to find any units with synonym = ${e}`)}catch(e){t.msg=e.message}return t}getAllUnitNames(){return Object.keys(this.unitNames_)}getUnitNamesList(){let e=[],t=Object.keys(this.unitCodes_);t.sort(this.compareCodes);let i=t.length;for(let s=0;s<i;s++)e[s]=t[s]+n.codeSep_+this.unitCodes_[t[s]].name_;return e}getMassDimensionIndex(){return this.massDimIndex_}compareCodes(e,t){return e=(e=e.replace(/[\[\]]/g,"")).toLowerCase(),t=(t=t.replace(/[\[\]]/g,"")).toLowerCase(),e<t?-1:1}getAllUnitCodes(){return Object.keys(this.unitCodes_)}allUnitsByDef(){let e=[],t=this.codeOrder_.length;for(let i=0;i<t;i++)e.push(this.getUnitByCode(this.codeOrder_[i]));return e}allUnitsByName(e,t){null==t&&(t="|");let i="",n=this.getAllUnitNames(),s=n.length,r=e.length;for(let o=0;o<s;o++){let s=this.getUnitByName(n[o]);for(let n=0;n<s.length;n++){let o=s[n];for(let n=0;n<r;n++)if(n>0&&(i+=t),"dim_"===e[n])null!==o.dim_&&void 0!==o.dim_&&o.dim_.dimVec_ instanceof Array?i+="["+o.dim_.dimVec_.join(",")+"]":i+="";else{let t=o[e[n]];"string"==typeof t?i+=t.replace(/[\n\r]/g," "):i+=t}i+="\r\n"}}return i}printUnits(e,t){void 0===e&&(e=!1),void 0===t&&(t="|");let i="",n=this.codeOrder_.length,s="csCode"+t;e&&(s+="ciCode"+t),s+="name"+t,e&&(s+="isBase"+t),s+="magnitude"+t+"dimension"+t+"from unit(s)"+t+"value"+t+"function"+t,e&&(s+="property"+t+"printSymbol"+t+"synonyms"+t+"source"+t+"class"+t+"isMetric"+t+"variable"+t+"isSpecial"+t+"isAbitrary"+t),s+="comment",i=s+"\n";for(let r=0;r<n;r++){let n=this.getUnitByCode(this.codeOrder_[r]);s=this.codeOrder_[r]+t,e&&(s+=n.getProperty("ciCode_")+t),s+=n.getProperty("name_")+t,e&&(n.getProperty("isBase_")?s+="true"+t:s+="false"+t),s+=n.getProperty("magnitude_")+t;let o=n.getProperty("dim_");o?s+=o.dimVec_+t:s+="null"+t,n.csUnitString_?s+=n.csUnitString_+t+n.baseFactor_+t:s+="null"+t+"null"+t,n.cnv_?s+=n.cnv_+t:s+="null"+t,e&&(s+=n.getProperty("property_")+t+n.getProperty("printSymbol_")+t+n.getProperty("synonyms_")+t+n.getProperty("source_")+t+n.getProperty("class_")+t+n.getProperty("isMetric_")+t+n.getProperty("variable_")+t+n.getProperty("isSpecial_")+t+n.getProperty("isArbitrary_")+t),n.defError_&&(s+="problem parsing this one, deferred to later."),i+=s+"\n"}return i}}var r=new s;t.UnitTables={getInstance:function(){return r}}}}]);